(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d213108"],{aaa3:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{directives:[{name:"action",rawName:"v-action",value:"org_permission_add_model",expression:"`org_permission_add_model`"}],staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{form:e.form,layout:"inline"},on:{submit:e.handleOk}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"模块名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入模块名称"}]}],expression:"[\n                'name',\n                {rules: [{ required: true, message: '请输入模块名称' }]}\n              ]"}],attrs:{placeholder:"请输入"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"模块标识"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["action",{rules:[{required:!0,message:"请输入模块标识"}]}],expression:"[\n                'action',\n                {rules: [{ required: true, message: '请输入模块标识' }]}\n              ]"}],attrs:{placeholder:"请输入"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",[a("a-checkbox",{directives:[{name:"decorator",rawName:"v-decorator",value:["defaultCheck",{valuePropName:"checked",initialValue:!0}],expression:"[\n                'defaultCheck',\n                {valuePropName: 'checked', initialValue: true}\n              ]"}],staticStyle:{display:"inline-block"}},[e._v("默认选中")]),a("a-button",{attrs:{type:"primary","html-type":"submit"}},[e._v("添加")])],1)],1)],1)],1)],1),a("a-table",{attrs:{rowKey:"id",columns:e.columns,pagination:!1,dataSource:e.permissionList},scopedSlots:e._u([{key:"expandedRowRender",fn:function(t){return a("div",{staticStyle:{margin:"0"}},[a("h3",[e._v("模块方法")]),a("a-row",{attrs:{gutter:24}},e._l(t.actionEntitySet,function(t){return a("a-col",{attrs:{span:6}},[e._v(e._s(t.name)+"("+e._s(t.action)+")")])}),1)],1)}},{key:"action2",fn:function(t,i){return a("span",{},[a("a",{directives:[{name:"action",rawName:"v-action",value:"org_permission_add_action",expression:"`org_permission_add_action`"}],attrs:{href:"javascript:;"},on:{click:function(t){return e.showAdd(i)}}},[e._v("添加方法")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{directives:[{name:"action",rawName:"v-action",value:"org_permission_delete_action",expression:"`org_permission_delete_action`"}],attrs:{href:"javascript:;"},on:{click:function(t){return e.handleDelete(i.id)}}},[e._v("删除")])],1)}}])}),a("a-modal",{attrs:{title:"添加子模块",visible:e.visible,maskClosable:!1},on:{cancel:function(t){e.visible=!1},ok:e.handleAddActionEntitySet}},[a("a-form",{attrs:{form:e.form2}},[a("a-form-item",{attrs:{label:"子模块名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入模块名称"}]}],expression:"[\n            'name',\n            {rules: [{ required: true, message: '请输入模块名称' }]}\n          ]"}],attrs:{placeholder:"请输入"}})],1),a("a-form-item",{attrs:{label:"子模块标识"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["action",{rules:[{required:!0,message:"请输入模块标识"}]}],expression:"[\n            'action',\n            {rules: [{ required: true, message: '请输入模块标识' }]}\n          ]"}],attrs:{placeholder:"请输入"}})],1),a("a-form-item",[a("a-checkbox",{directives:[{name:"decorator",rawName:"v-decorator",value:["defaultCheck",{valuePropName:"checked",initialValue:!0}],expression:"[\n            'defaultCheck',\n            {valuePropName: 'checked', initialValue: true}\n          ]"}],staticStyle:{display:"inline-block"},model:{value:e.topForm.defaultCheck,callback:function(t){e.$set(e.topForm,"defaultCheck",t)},expression:"topForm.defaultCheck"}},[e._v("默认选中")])],1)],1)],1)],1)},n=[],r=a("2af9"),s=a("365c"),o={name:"PermissionList",components:{STable:r["e"]},data:function(){return{description:"列表使用场景：后台管理中的权限管理以及角色管理，可用于基于 RBAC 设计的角色权限控制，颗粒度细到每一个操作类型。",visible:!1,labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},form:this.$form.createForm(this),form2:this.$form.createForm(this),mdl:{},topForm:{name:"",action:"",defaultCheck:!0,actionEntitySet:[]},advanced:!1,queryParam:{},columns:[{title:"模块名称",dataIndex:"name"},{title:"模块标识",dataIndex:"action"},{title:"默认选中",dataIndex:"defaultCheck"},{title:"操作",width:"200px",dataIndex:"action2",scopedSlots:{customRender:"action2"}}],permissionList:[]}},filters:{statusFilter:function(e){var t={1:"正常",2:"禁用"};return t[e]}},created:function(){this.getList()},methods:{showAdd:function(e){this.mdl=e,this.visible=!0},getList:function(){var e=this;s["default"].permission.list().then(function(t){e.permissionList=t.result.data})},handleDelete:function(e){var t=this;s["default"].permission.remove(e).then(function(e){t.$message.success("删除成功"),t.getList()}).catch(function(){}).finally(function(){t.confirmLoading=!1})},handleOk:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,a){e||(t.confirmLoading=!0,s["default"].permission.save(a).then(function(e){t.$message.success("添加成功"),t.getList()}).catch(function(){}).finally(function(){t.confirmLoading=!1}))})},handleAddActionEntitySet:function(e){var t=this;e.preventDefault(),this.form2.validateFields(function(e,a){e||(t.confirmLoading=!0,t.mdl.actionEntitySet.push(a),delete t.mdl.actionEntity,s["default"].permission.update(t.mdl).then(function(e){t.$message.success("添加成功"),t.getList()}).catch(function(){}).finally(function(){t.confirmLoading=!1,t.visible=!1}))})}}},c=o,l=a("2877"),d=Object(l["a"])(c,i,n,!1,null,null,null);t["default"]=d.exports}}]);