(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-62be5422"],{1010:function(t,e,a){},"355a":function(t,e,a){"use strict";var r=a("1010"),n=a.n(r);n.a},5818:function(t,e,a){"use strict";var r=a("fc8c"),n=a.n(r);n.a},"81d1":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"head-info",class:t.center&&"center"},[a("span",[t._v(t._s(t.title))]),a("p",[t._v(t._s(t.content))]),t.bordered?a("em"):t._e()])},n=[],i={name:"HeadInfo",props:{title:{type:String,default:""},content:{type:String,default:""},bordered:{type:Boolean,default:!1},center:{type:Boolean,default:!0}}},s=i,o=(a("5818"),a("2877")),l=Object(o["a"])(s,r,n,!1,null,"432d5786",null);e["a"]=l.exports},"88a3":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-card",{staticStyle:{"margin-top":"24px"},attrs:{bordered:!1}},[a("div",{attrs:{slot:"title"},slot:"title"},[a("a-radio-group",{on:{change:t.onChangeType},model:{value:t.queryParam.type,callback:function(e){t.$set(t.queryParam,"type",e)},expression:"queryParam.type"}},[a("a-radio-button",{attrs:{value:0}},[t._v("全部")]),a("a-radio-button",{attrs:{value:1}},[t._v("指派给我的")]),a("a-radio-button",{attrs:{value:2}},[t._v("由我创建的")]),a("a-radio-button",{attrs:{value:3}},[t._v("抄送给我的")])],1),a("a-input-search",{staticStyle:{"margin-left":"10px",width:"200px"},attrs:{placeholder:"搜索关键词"},on:{search:t.onSearch},model:{value:t.queryParam.keyword,callback:function(e){t.$set(t.queryParam,"keyword",e)},expression:"queryParam.keyword"}}),a("div",{staticStyle:{display:"inline-block","margin-right":"10px","font-size":"14px",float:"right"}},[a("a-select",{staticStyle:{width:"200px",display:"inline-block","margin-left":"5px"},attrs:{placeholder:"选择项目"},on:{change:t.handleChangeProject}},[a("a-select-option",{attrs:{value:0}},[t._v("全部")]),t._l(t.projectList,function(e){return a("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})],2),a("a-select",{directives:[{name:"action",rawName:"v-action",value:"bug_choose_department",expression:"`bug_choose_department`"}],staticStyle:{width:"200px",display:"inline-block","margin-left":"5px"},attrs:{placeholder:"选择部门"},on:{change:t.handleChangeDepartment}},[a("a-select-option",{attrs:{value:0}},[t._v("全部")]),t._l(t.departmentList,function(e){return[a("a-select-option",{attrs:{value:e.id}},[t._v(t._s(e.name))]),t._l(e.departments,function(r){return[a("a-select-option",{attrs:{value:r.id}},[t._v(t._s(e.name)+">"+t._s(r.name))]),t._l(r.departments,function(n){return[a("a-select-option",{attrs:{value:n.id}},[t._v(t._s(e.name)+">"+t._s(r.name)+">"+t._s(n.name))])]})]})]})],2)],1)],1),a("div",{attrs:{slot:"extra"},slot:"extra"},[a("a-button",{directives:[{name:"action",rawName:"v-action",value:"bug_export_excel",expression:"`bug_export_excel`"}],staticStyle:{"margin-right":"10px"},on:{click:t.exportExcel}},[a("a-icon",{attrs:{type:"file-excel"}}),t._v("导出Excel")],1),a("a-button",{directives:[{name:"action",rawName:"v-action",value:"bug_add_bug",expression:"`bug_add_bug`"}],attrs:{type:"primary"},on:{click:function(e){return t.$router.push("/bug/add")}}},[a("a-icon",{attrs:{type:"plus"}}),t._v("提Bug")],1)],1),a("s-table",{ref:"table",attrs:{size:"default",rowKey:"id",columns:t.columns,data:t.loadData},scopedSlots:t._u([{key:"title2",fn:function(e,r){return a("span",{},[r?a("a-popover",{attrs:{title:"当前状态"}},[a("template",{slot:"content"},[a("a-steps",{staticClass:"steps-popover",attrs:{size:"small",labelPlacement:"vertical",current:r.status}},[a("a-step",{attrs:{title:"未确认"}}),a("a-step",{attrs:{title:"已确认"}}),a("a-step",{attrs:{title:"处理中"}}),a("a-step",{attrs:{title:"已解决"}}),a("a-step",{attrs:{title:"已通过"}})],1)],1),a("a-tooltip",{attrs:{placement:"bottom"}},[a("template",{slot:"title"},[a("span",[t._v(t._s(e))])]),a("a",{staticStyle:{color:"#333"},attrs:{href:"javascript:;"}},[t._v(t._s(t._f("maxLength")(e)))])],2)],2):t._e()],1)}},{key:"severity",fn:function(e){return a("span",{staticClass:"severity_num",class:t.severityClass(e)},[a("label",{staticStyle:{"white-space":"nowrap"}},[t._v(t._s(t.BUG_VARIABLES.severity[e]))])])}},{key:"priority",fn:function(e){return a("span",{staticClass:"priority_num",class:t.priorityClass(e)},[t._v("\n        "+t._s(t.BUG_VARIABLES.priority[e])+"\n      ")])}},{key:"model",fn:function(e){return a("span",{},[a("label",{staticStyle:{"white-space":"nowrap"}},[t._v(t._s(e))])])}},{key:"status",fn:function(e){return a("span",{},[a("label",{staticStyle:{"white-space":"nowrap"}},[t._v(t._s(t.STATUS_CODES[e]||"未确认"))])])}},{key:"action",fn:function(e,r){return a("span",{},[a("router-link",{directives:[{name:"action",rawName:"v-action",value:"bug_show_bug",expression:"`bug_show_bug`"}],attrs:{to:"/bug/detail/"+r.id}},[t._v("详情")]),a("a-divider",{attrs:{type:"vertical"}}),t.isEditable(r)?a("router-link",{directives:[{name:"action",rawName:"v-action",value:"bug_edit_bug",expression:"`bug_edit_bug`"}],attrs:{to:"/bug/edit/"+r.id}},[t._v("编辑")]):t._e(),a("a-divider",{attrs:{type:"vertical"}}),t.isEditable(r)?a("a",{directives:[{name:"action",rawName:"v-action",value:"bug_delete_bug",expression:"`bug_delete_bug`"}],attrs:{href:"javascript:;"},on:{click:function(e){return t.handleDelete(r.id)}}},[t._v("删除")]):t._e()],1)}}])})],1)],1)},n=[],i=a("5176"),s=a.n(i),o=(a("7f7f"),a("81d1")),l=a("ab09"),c=a("365c"),u=a("2af9"),d=a("d9cd"),p={components:{HeadInfo:o["a"],STable:l["a"],Ellipsis:u["c"]},data:function(){var t=this;return{BUG_VARIABLES:d["a"],STATUS_CODES:d["d"],exportVisible:!1,departmentList:[],projectList:[],columns:[{title:"编号",dataIndex:"code"},{title:"Bug标题",dataIndex:"title",scopedSlots:{customRender:"title2"}},{title:"严重程度",dataIndex:"severity",scopedSlots:{customRender:"severity"}},{title:"优先级",dataIndex:"priority",scopedSlots:{customRender:"priority"}},{title:"项目",dataIndex:"project"},{title:"模块",dataIndex:"model",scopedSlots:{customRender:"model"}},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"创建人",dataIndex:"creatorName"},{title:"开始日期",dataIndex:"startTime",customRender:function(t){return t.substring(0,10)}},{title:"截止日期",dataIndex:"settlingTime",customRender:function(t){return t.substring(0,10)},sort:!0},{title:"负责人",dataIndex:"leading",customRender:function(t){return t.name}},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"}}],queryParam:{type:2,keyword:"",department:"",project:""},loadData:function(e){return c["default"].bug.list(s()(e,t.queryParam)).then(function(t){return t.result})}}},created:function(){this.getDepartList(),this.getProjecttList()},computed:{userid:function(){return this.$store.state.user.info.id}},filters:{maxLength:function(t){return t.length>10?t.substring(0,10)+"...":t}},methods:{getProjecttList:function(){var t=this;c["default"].project.list({pageSize:-1,pageNo:1}).then(function(e){t.projectList=e.result.data})},isEditable:function(t){return t.leading.id==this.userid||t.creatorId==this.userid},onSearch:function(){this.$refs.table.refresh()},handleChangeDepartment:function(t){this.queryParam.department=t,this.$refs.table.refresh()},handleChangeProject:function(t){this.queryParam.project=t,this.$refs.table.refresh()},exportExcel:function(){var t=c["default"].bug.getExportUrl(this.queryParam,this.userid);window.open(t)},formatTree:function(t){var e=this;return t.map(function(t){return t.title=t.name,t.departments&&t.departments.length>0&&(t.children=e.formatTree(t.departments)),t})},getDepartList:function(){var t=this;c["default"].department.tree().then(function(e){var a=e.result.data;t.departmentList=t.formatTree(a)})},priorityClass:function(t){var e={};return e["priority_num_".concat(5-t)]=!0,e},severityClass:function(t){var e={};return e["severity_num_".concat(6-t)]=!0,e},onChangeType:function(){0!==this.queryParam.type&&(this.queryParam.keyword="",this.queryParam.department=0,this.queryParam.project=0),this.$refs.table.refresh()},refreshTable:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$refs.table.refresh(t)},handleDelete:function(t){var e=this;this.$confirm({title:"温馨提示",content:"您确定要删除该Bug吗？删除后无法恢复",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){c["default"].bug.remove(t).then(function(){return e.$refs.table.refresh(1)})},onCancel:function(){console.log("Cancel")}})}}},f=p,m=(a("355a"),a("2877")),v=Object(m["a"])(f,r,n,!1,null,"0e9d7038",null);e["default"]=v.exports},fc8c:function(t,e,a){}}]);