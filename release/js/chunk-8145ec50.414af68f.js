(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8145ec50"],{"295a":function(t,e,a){"use strict";var s=a("f7a8"),i=a.n(s);i.a},"428c":function(t,e,a){"use strict";var s=a("9676"),i=a.n(s);i.a},9676:function(t,e,a){},e959:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:16}},[a("div",[a("a-button",{on:{click:function(e){return t.$router.go(-1)}}},[t._v("返回")]),a("label",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.detail.title))])],1),a("a-card",{staticStyle:{"margin-top":"10px"}},[a("h4",[t._v("描述")]),a("p",[t._v(t._s(t.detail.describe||"无"))]),a("HistoryList",{attrs:{list:t.history}})],1),a("div",{staticClass:"main-actions"},[a("div",{staticClass:"btn-toolbar"},[a("a",{staticClass:"btn",attrs:{id:"back",title:"返回[快捷键:Alt+↑]"},on:{click:function(e){return t.$router.go(-1)}}},[a("a-icon",{attrs:{type:"back"}}),t._v("返回")],1),4==t.detail.status?a("a",{staticClass:"btn btn-link iframe",on:{click:function(e){return t.showModal(0)}}},[a("a-icon",{attrs:{type:"key"}}),a("span",{staticClass:"text"},[t._v("激活")])],1):t._e(),null===t.detail.status?a("a",{staticClass:"btn btn-link iframe",on:{click:function(e){return t.showModal(1)}}},[a("a-icon",{attrs:{type:"search"}}),a("span",{staticClass:"text"},[t._v("确认")])],1):t._e(),t.detail.status>=1?a("a",{staticClass:"btn btn-link iframe",on:{click:function(e){return t.showModal(2)}}},[a("a-icon",{attrs:{type:"search"}}),a("span",{staticClass:"text"},[t._v("处理中")])],1):t._e(),t.detail.status>=2?a("a",{staticClass:"btn btn-link iframe",on:{click:function(e){return t.showModal(3)}}},[a("a-icon",{attrs:{type:"check"}}),a("span",{staticClass:"text"},[t._v("解决")])],1):t._e(),t.detail.status>=3?a("a",{staticClass:"btn btn-link iframe",on:{click:function(e){return t.showModal(4)}}},[a("a-icon",{attrs:{type:"check"}}),a("span",{staticClass:"text"},[t._v("通过")])],1):t._e(),a("a",{staticClass:"btn btn-link iframe",on:{click:function(e){return t.$router.push("/bug/edit/"+t.id)}}},[a("a-icon",{attrs:{type:"edit"}}),a("span",{staticClass:"text"},[t._v("编辑")])],1),a("a",{staticClass:"btn btn-link iframe",on:{click:function(e){return t.handleDelete(t.id)}}},[a("a-icon",{attrs:{type:"delete"}}),a("span",{staticClass:"text"},[t._v("删除")])],1)])])],1),a("a-col",{attrs:{span:8}},[a("div",{staticStyle:{"text-align":"right"}},[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.$router.push("/bug/add")}}},[t._v("+提Bug")])],1),a("a-card",{staticStyle:{"margin-top":"10px"}},[a("table",{staticClass:"table table-data"},[a("tbody",[a("tr",{attrs:{valign:"middle"}},[a("th",{staticClass:"w-70px"},[t._v("所属项目")]),a("td",[t._v(t._s(t.detail.project))])]),a("tr",[a("th",[t._v("所属模块")]),a("td",{attrs:{title:"/"}},[t._v(t._s(t.detail.model))])]),a("tr",[a("th",[t._v("Bug类型")]),a("td",[t._v(t._s(t.detail.type))])]),a("tr",[a("th",[t._v("严重程度")]),a("td",[a("span",{staticClass:"label-severity",attrs:{"data-severity":"3",title:"3"}},[t._v(t._s(t.detail.severity))])])]),a("tr",[a("th",[t._v("优先级")]),a("td",[a("span",{staticClass:"label-pri label-pri-1",attrs:{title:"1"}},[t._v(t._s(t.detail.priority))])])]),a("tr",[a("th",[t._v("Bug状态")]),a("td",[a("span",{staticClass:"status-bug status-active"},[t._v(t._s(t.STATUS_CODES[t.detail.status]||"未确认"))])])]),a("tr",[a("th",[t._v("当前指派")]),a("td",[t._v(t._s(t.detail.leading&&t.detail.leading.name))])]),a("tr",[a("th",[t._v("截止日期")]),a("td",[t._v("\n                "+t._s(t._f("dateTrim")(t.detail.settlingTime)))])]),a("tr",[a("th",[t._v("操作系统")]),a("td",[t._v(t._s(t.detail.operating_system))])]),a("tr",[a("th",[t._v("操作系统")]),a("td",[t._v(t._s(t.detail.browser))])])])])])],1)],1),a("status-modal",{ref:"modal",attrs:{history:t.history},on:{ok:t.onSetStatus}})],1)},i=[],n=(a("a481"),a("365c")),r=a("d9cd"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:["description-list",t.size,"vertical"===t.layout?"vertical":"horizontal"]},[t.title?a("div",{staticClass:"title"},[t._v(t._s(t.title))]):t._e(),a("a-row",[t._t("default")],2)],1)},o=[],c=a("cebc"),u=(a("c5f6"),a("da05")),d={name:"DetailListItem",props:{term:{type:String,default:"",required:!1}},inject:{col:{type:Number}},render:function(){var t=arguments[0];return t(u["b"],{props:Object(c["a"])({},p[this.col])},[t("div",{class:"term"},[this.$props.term]),t("div",{class:"content"},[this.$slots.default])])}},p={1:{xs:24},2:{xs:24,sm:12},3:{xs:24,sm:12,md:8},4:{xs:24,sm:12,md:6}},f={name:"DetailList",Item:d,components:{Col:u["b"]},props:{title:{type:String,default:"",required:!1},col:{type:Number,required:!1,default:3},size:{type:String,required:!1,default:"large"},layout:{type:String,required:!1,default:"horizontal"}},provide:function(){return{col:this.col>4?4:this.col}}},h=f,m=(a("295a"),a("2877")),v=Object(m["a"])(h,l,o,!1,null,"745c64a4",null),_=v.exports,b=_,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{staticStyle:{top:"20px"},attrs:{title:""+t.STATUS_ACTION_CODES[t.mdl.status],width:800},on:{ok:t.handleOk},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("a-form",{attrs:{form:t.form}},[a("a-form-item",{attrs:{label:"附件","label-col":{span:2},"wrapper-col":{span:12},hasFeedback:""}},[a("a-upload",{directives:[{name:"decorator",rawName:"v-decorator",value:["annex",{valuePropName:"fileList",getValueFromEvent:t.normFile}],expression:"['annex', {\n          valuePropName: 'fileList',\n          getValueFromEvent: normFile,\n      }]"}],attrs:{name:"file",extra:"文件最大限制10M","list-type":"picture",action:t.uploadUrl}},[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),t._v(" 选择文件\n        ")],1)],1)],1),a("a-form-item",{attrs:{label:"描述","label-col":{span:2},"wrapper-col":{span:12},hasFeedback:""}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["describe"],expression:"[\n          'describe'\n        ]"}],attrs:{placeholder:""}})],1)],1)],1)},g=[],k=a("a745"),C=a.n(k),S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"history-list"},[a("h4",[t._v("历史记录")]),a("ul",[a("li",[t._v("\n      "+t._s(t.first.creatorTime.substring(0,19))+", 由 "+t._s(t.first.creatorName)+" 创建。\n    ")]),t._l(t.others,function(e){return a("li",{key:e.id},[t._v("\n      "+t._s(e.modifierTime)+", 由 "+t._s(e.modifierName)+" "+t._s(t.STATUS_ACTION_CODES[e.status])+"。\n    ")])})],2)])},x=[],w={props:["list"],data:function(){return{STATUS_ACTION_CODES:r["c"],first:{},others:{}}},watch:{list:function(t){var e=[].concat(this.list);this.first=e.splice(0,1)[0],this.others=e}}},T=w,O=Object(m["a"])(T,S,x,!1,null,null,null),$=O.exports,D={props:["history"],components:{HistoryList:$},data:function(){return{visible:!1,mdl:{},uploadUrl:"http://61.144.170.37:8085/upload",STATUS_ACTION_CODES:r["c"],form:this.$form.createForm(this)}},methods:{normFile:function(t){return console.log("Upload event:",t),C()(t)?t:t&&t.fileList},show:function(t){var e=this,a=t.id,s=t.status;this.visible=!0,this.mdl={id:a,status:s},this.$nextTick(function(){e.form.resetFields()})},close:function(){this.$emit("close"),this.visible=!1},handleOk:function(){var t=this;this.form.validateFields(function(e,a){e||(t.confirmLoading=!0,a.annex&&(a.annex=a.annex[0].response.data),n["default"].bug.setStatus(Object(c["a"])({},t.mdl,a)).then(function(e){t.$message.success("保存成功"),t.$emit("ok")}).catch(function(){}).finally(function(){t.confirmLoading=!1,t.close()}))})}}},A=D,E=Object(m["a"])(A,y,g,!1,null,null,null),L=E.exports,N=b.Item,F={components:{DescriptionList:b,DescriptionListItem:N,StatusModal:L,HistoryList:$},data:function(){return{detail:{},history:[],id:this.$route.params.id,BUG_VARIABLES:r["a"],STATUS_CODES:r["d"]}},created:function(){this.getDetail(),this.getHistory()},computed:{currentStatus:function(){return this.detail.status}},methods:{handleDelete:function(t){var e=this;this.$confirm({title:"温馨提示",content:"您确定要删除该Bug吗？删除后无法恢复",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){e.$router.replace("/dashboard/workplace")},onCancel:function(){console.log("Cancel")}})},getDetail:function(){var t=this;n["default"].bug.detail(this.id).then(function(e){t.detail=e.data})},getHistory:function(){var t=this;n["default"].bug.history(this.id).then(function(e){t.history=e.result.data})},showModal:function(t){this.$refs.modal.show({status:t,id:this.id})},setStatus:function(t){n["default"].bug.setStatus({})},onSetStatus:function(t){this.getDetail(),this.getHistory()}}},U=F,I=(a("428c"),Object(m["a"])(U,s,i,!1,null,"1411d364",null));e["default"]=I.exports},f7a8:function(t,e,a){}}]);